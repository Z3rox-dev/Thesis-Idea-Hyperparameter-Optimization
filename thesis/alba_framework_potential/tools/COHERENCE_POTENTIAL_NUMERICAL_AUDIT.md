# Coherence + Potential Field — Numerical Audit

This report is generated by `coherence_potential_numerical_audit.py`.

## Summary

- **PASS** — LS solver recovery (gauge-fixed): rmse=0.0006, pearson=1.0000, n=40, |E|=199
- **PASS** — Potential monotonicity on 2D bowl: pearson(dist,pot)=0.9982, spearman=0.9952, global_coh=0.983, q60=0.985, q80=0.987
- **WARN** — Coherence dip near optimum in 1D: coh(at x≈0)=0.500 vs coh(far)≈1.000 (alignment-based coherence penalizes sign flips near an extremum)
- **PASS** — Affine invariance (2D): max|Δpotential|=6.661e-16 (scale+translation)
- **PASS** — Categorical masking reduces spurious potential: |corr(dist_xy,pot)|: no-mask=0.009 vs masked=0.805; global_coh(no-mask)=1.000, global_coh(masked)=0.980
- **WARN** — Disconnected graph behavior: kNN graph disconnected (k=1). potential stats: clusterA mean=0.508, clusterB mean=0.633, global_coh=0.947. Interpretation across components is ill-posed.
- **PASS** — Neutral outputs when gradients are missing: global_coh=0.5, q60=0.5, q80=0.5, coh_mean=0.500, pot_std=0.000e+00
- **PASS** — Random-gradient field yields low structure: global_coh=0.523, q60=0.547, q80=0.621, coh_median=0.523, |corr(dist,pot)|=0.193, pot_std=0.197
- **WARN** — NaN gradient propagation: Non-finite gradient can propagate to coherence/global metrics (expected with current implementation). global_coh=nan, q60=nan, q80=nan

## Interpretation

- **PASS**: the check is consistent with the intended numerical/mathematical behavior.
- **WARN**: the behavior is numerically stable but highlights a methodological limitation or a regime where interpretation can be misleading.
- **FAIL**: indicates a strong numerical inconsistency (e.g., solver not recovering a known signal).

